<HTML>
<HEAD>
<TITLE>class JGEngine</TITLE>

<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">
<TABLE WIDTH="100%" BORDER="0">
<TR>
<TD>
	<TABLE BORDER="0">
		<TR><TD valign="top" align="left" cellspacing="10">
		<h1>class JGEngine</h1>
		</TD>
		<TD valign="top" align="right" colspan="1">A Jingle engine. <small><A HREF="#longdesc">More...</A></small></TD></TR>
	</TABLE>
	<HR>
	<TABLE BORDER="0">
		<TR><TH>Full name</TH><TD><code><A HREF="TelEngine.html">TelEngine</A>::JGEngine</code></TD></TR>
<TR><TH>Definition</TH><TD><code>#include &lt;<A HREF="libs___yjabber___yatejingle_h.html">libs/yjabber/yatejingle.h</A>&gt;</code></TD></TR>
<TR><TH>Inherits</TH><TD><A HREF="TelEngine__DebugEnabler.html">TelEngine::DebugEnabler</A> <small>[public ]</small>, <A HREF="TelEngine__Mutex.html">TelEngine::Mutex</A> <small>[public ]</small></TD></TR>
<TR><TH><A HREF="full-list-TelEngine__JGEngine.html">List of all Methods</A></TH></TR>
	</TABLE>
	</TD>
<TD align="right"><TABLE BORDER="0"><TR><TD><small><A HREF="index-long.html">Annotated List</A></small></TD></TR>
<TR><TD><small><A HREF="header-list.html">Files</A></small></TD></TR>
<TR><TD><small><A HREF="all-globals.html">Globals</A></small></TD></TR>
<TR><TD><small><A HREF="hier.html">Hierarchy</A></small></TD></TR>
<TR><TD><small><A HREF="index.html">Index</A></small></TD></TR>
</TABLE></TD></TR></TABLE>
<h4>Public Methods</h4><ul><LI>&nbsp;<b><A HREF="#ref2">JGEngine</A></b> (const char* name = "jgengine") 
</LI>
<LI>virtual  &nbsp;<b><A HREF="#ref3">~JGEngine</A></b> () 
</LI>
<LI>inline int &nbsp;<b><A HREF="#ref4">sessionFlags</A></b> ()  const
</LI>
<LI>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<b><A HREF="#ref5">stanzaTimeout</A></b> ()  const
</LI>
<LI>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<b><A HREF="#ref6">streamHostTimeout</A></b> ()  const
</LI>
<LI>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<b><A HREF="#ref7">pingInterval</A></b> ()  const
</LI>
<LI>virtual  void &nbsp;<b><A HREF="#ref8">initialize</A></b> (const NamedList& params) 
</LI>
<LI>virtual  bool &nbsp;<b><A HREF="#ref9">sendStanza</A></b> (JGSession* session, XmlElement*& stanza) 
</LI>
<LI>virtual  bool &nbsp;<b><A HREF="#ref10">sendMessage</A></b> (JGSession* session, const char* body) 
</LI>
<LI>JGEvent* &nbsp;<b><A HREF="#ref11">getEvent</A></b> (<A HREF="#u_int64_t">u_int64_t</A> time) 
</LI>
<LI>JGSession* &nbsp;<b><A HREF="#ref12">call</A></b> (JGSession::Version ver, const JabberID& caller, const JabberID& called,
	const ObjList& contents, XmlElement* extra = 0, const char* msg = 0,
	const char* subject = 0, const char* line = 0, int* flags = 0) 
</LI>
<LI>bool &nbsp;<b><A HREF="#ref13">acceptIq</A></b> (XMPPUtils::IqType type, const JabberID& from, const JabberID& to,
	const String& id, XmlElement* xml, const char* line,
	XMPPError::Type& error, String& text) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref14">defProcessEvent</A></b> (JGEvent* event) 
</LI>
<LI>virtual  void &nbsp;<b><A HREF="#ref15">processEvent</A></b> (JGEvent* event) 
</LI>
</ul><h4>Public Static Methods</h4><ul><LI>static  int &nbsp;<b><A HREF="#ref16">decodeFlags</A></b> (const String& list, const TokenDict* dict) 
</LI>
<LI>static  void &nbsp;<b><A HREF="#ref17">encodeFlags</A></b> (String& buf, int flags, const TokenDict* dict) 
</LI>
</ul><HR><H2><A NAME="longdesc">Detailed Description</A></H2><p>
 This class holds a Jingle service for the Jabber engine. Handle jingle stanzas,
  stanza write fail events and stream termination events
</p>
<A NAME="JGEngine"></A><A NAME="ref2"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>JGEngine</strong> (const char* name = "jgengine")
<br></td><td align="right"><h3><strong>JGEngine</strong></h3></td></tr></table><p></p><p>
 Constructor
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>name</i></TD><TD align="left" valign="top">Debug name
     </TD></TR>
</TABLE></P>
<A NAME="~JGEngine"></A><A NAME="ref3"></A><table width="100%"><tr bgcolor="#eeeeee"><td> &nbsp;<strong>~JGEngine</strong> ()
<br></td><td align="right"><h3><strong>~JGEngine</strong></h3></td></tr></table><p> <small>[virtual]</small></p><p>
 Destructor. Terminates all active sessions
     </p>
<A NAME="sessionFlags"></A><A NAME="ref4"></A><table width="100%"><tr bgcolor="#eeeeee"><td>inline int &nbsp;<strong>sessionFlags</strong> ()
<br></td><td align="right"><h3><strong>sessionFlags</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Retrieve the default session flags value
</p>
<p><b>Returns</b>: The default session flags value
     </p>
<A NAME="stanzaTimeout"></A><A NAME="ref5"></A><table width="100%"><tr bgcolor="#eeeeee"><td>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<strong>stanzaTimeout</strong> ()
<br></td><td align="right"><h3><strong>stanzaTimeout</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get the timeout interval of a sent stanza
</p>
<p><b>Returns</b>: The timeout interval of a sent stanza
     </p>
<A NAME="streamHostTimeout"></A><A NAME="ref6"></A><table width="100%"><tr bgcolor="#eeeeee"><td>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<strong>streamHostTimeout</strong> ()
<br></td><td align="right"><h3><strong>streamHostTimeout</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get the timeout interval of a sent stream host stanza
</p>
<p><b>Returns</b>: The timeout interval of a sent stream host stanza
     </p>
<A NAME="pingInterval"></A><A NAME="ref7"></A><table width="100%"><tr bgcolor="#eeeeee"><td>inline <A HREF="#u_int64_t">u_int64_t</A> &nbsp;<strong>pingInterval</strong> ()
<br></td><td align="right"><h3><strong>pingInterval</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get the ping interval used by jingle sessions
</p>
<p><b>Returns</b>: The interval to ping the remote party of a jingle session
     </p>
<A NAME="initialize"></A><A NAME="ref8"></A><table width="100%"><tr bgcolor="#eeeeee"><td> void &nbsp;<strong>initialize</strong> (const NamedList& params)
<br></td><td align="right"><h3><strong>initialize</strong></h3></td></tr></table><p> <small>[virtual]</small></p><p>
 Initialize this service
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>params</i></TD><TD align="left" valign="top">Service's parameters
     </TD></TR>
</TABLE></P>
<A NAME="sendStanza"></A><A NAME="ref9"></A><table width="100%"><tr bgcolor="#eeeeee"><td> bool &nbsp;<strong>sendStanza</strong> (JGSession* session, XmlElement*& stanza)
<br></td><td align="right"><h3><strong>sendStanza</strong></h3></td></tr></table><p> <small>[virtual]</small></p><p>
 Send a session's stanza.
 This method should be re-implemented
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>session</i></TD><TD align="left" valign="top">The session requesting the operation
</TD></TR>
<TR><TD align="left" valign="top"><i>stanza</i></TD><TD align="left" valign="top">The stanza to send. Will be consumed and zeroed
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: True on success
     </p>
<A NAME="sendMessage"></A><A NAME="ref10"></A><table width="100%"><tr bgcolor="#eeeeee"><td> bool &nbsp;<strong>sendMessage</strong> (JGSession* session, const char* body)
<br></td><td align="right"><h3><strong>sendMessage</strong></h3></td></tr></table><p> <small>[virtual]</small></p><p>
 Send a chat message on behalf of a session
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>session</i></TD><TD align="left" valign="top">The session requesting the operation
</TD></TR>
<TR><TD align="left" valign="top"><i>body</i></TD><TD align="left" valign="top">Message body
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: True on success
     </p>
<A NAME="getEvent"></A><A NAME="ref11"></A><table width="100%"><tr bgcolor="#eeeeee"><td>JGEvent* &nbsp;<strong>getEvent</strong> (<A HREF="#u_int64_t">u_int64_t</A> time)
<br></td><td align="right"><h3><strong>getEvent</strong></h3></td></tr></table><p></p><p>
 Call getEvent() for each session list until an event is generated or the end is reached
 This method is thread safe
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>time</i></TD><TD align="left" valign="top">Current time in miliseconds
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: The first generated event
     </p>
<A NAME="call"></A><A NAME="ref12"></A><table width="100%"><tr bgcolor="#eeeeee"><td>JGSession* &nbsp;<strong>call</strong> (JGSession::Version ver, const JabberID& caller, const JabberID& called,
	const ObjList& contents, XmlElement* extra = 0, const char* msg = 0,
	const char* subject = 0, const char* line = 0, int* flags = 0)
<br></td><td align="right"><h3><strong>call</strong></h3></td></tr></table><p></p><p>
 Make an outgoing call.
 'media' and 'transport' will be invalid on exit. Don't delete them
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>ver</i></TD><TD align="left" valign="top">The session version to use
</TD></TR>
<TR><TD align="left" valign="top"><i>caller</i></TD><TD align="left" valign="top">The caller
</TD></TR>
<TR><TD align="left" valign="top"><i>called</i></TD><TD align="left" valign="top">The called
</TD></TR>
<TR><TD align="left" valign="top"><i>contents</i></TD><TD align="left" valign="top">The list of session content(s)
</TD></TR>
<TR><TD align="left" valign="top"><i>extra</i></TD><TD align="left" valign="top">Optional extra child for session initiate element
</TD></TR>
<TR><TD align="left" valign="top"><i>msg</i></TD><TD align="left" valign="top">Optional message to send before call
</TD></TR>
<TR><TD align="left" valign="top"><i>subject</i></TD><TD align="left" valign="top">Optional session subject
</TD></TR>
<TR><TD align="left" valign="top"><i>line</i></TD><TD align="left" valign="top">Optional session account
</TD></TR>
<TR><TD align="left" valign="top"><i>flags</i></TD><TD align="left" valign="top">Optional session flags to set
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: Valid JGSession pointer (referenced) on success
     </p>
<A NAME="acceptIq"></A><A NAME="ref13"></A><table width="100%"><tr bgcolor="#eeeeee"><td>bool &nbsp;<strong>acceptIq</strong> (XMPPUtils::IqType type, const JabberID& from, const JabberID& to,
	const String& id, XmlElement* xml, const char* line,
	XMPPError::Type& error, String& text)
<br></td><td align="right"><h3><strong>acceptIq</strong></h3></td></tr></table><p></p><p>
 Ask this engine to accept an incoming xml 'iq' element
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>type</i></TD><TD align="left" valign="top">Iq type as enumeration
</TD></TR>
<TR><TD align="left" valign="top"><i>from</i></TD><TD align="left" valign="top">The sender
</TD></TR>
<TR><TD align="left" valign="top"><i>to</i></TD><TD align="left" valign="top">The recipient
</TD></TR>
<TR><TD align="left" valign="top"><i>id</i></TD><TD align="left" valign="top">Element id attribute
</TD></TR>
<TR><TD align="left" valign="top"><i>xml</i></TD><TD align="left" valign="top">The received element
</TD></TR>
<TR><TD align="left" valign="top"><i>line</i></TD><TD align="left" valign="top">Account receiving the stanza (may be empty)
</TD></TR>
<TR><TD align="left" valign="top"><i>error</i></TD><TD align="left" valign="top">XMPPError result. This value should be check if false is returned.
  Any value different from NoError indicate an invalid element
</TD></TR>
<TR><TD align="left" valign="top"><i>text</i></TD><TD align="left" valign="top">Error text
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: True if accepted (don't use the given pointer if accepted)
     </p>
<A NAME="defProcessEvent"></A><A NAME="ref14"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>defProcessEvent</strong> (JGEvent* event)
<br></td><td align="right"><h3><strong>defProcessEvent</strong></h3></td></tr></table><p></p><p>
 Default event processor. Delete event.
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>event</i></TD><TD align="left" valign="top">The event to process
     </TD></TR>
</TABLE></P>
<A NAME="processEvent"></A><A NAME="ref15"></A><table width="100%"><tr bgcolor="#eeeeee"><td> void &nbsp;<strong>processEvent</strong> (JGEvent* event)
<br></td><td align="right"><h3><strong>processEvent</strong></h3></td></tr></table><p> <small>[virtual]</small></p><p>
 Process events from the sessions. Default action: Delete event.
 Descendants must override this method to process generated events
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>event</i></TD><TD align="left" valign="top">The event to process
     </TD></TR>
</TABLE></P>
<A NAME="decodeFlags"></A><A NAME="ref16"></A><table width="100%"><tr bgcolor="#eeeeee"><td> int &nbsp;<strong>decodeFlags</strong> (const String& list, const TokenDict* dict)
<br></td><td align="right"><h3><strong>decodeFlags</strong></h3></td></tr></table><p> <small>[static]</small></p><p>
 Decode a comma separated list of flags
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>list</i></TD><TD align="left" valign="top">The list of flags
</TD></TR>
<TR><TD align="left" valign="top"><i>dict</i></TD><TD align="left" valign="top">Dictionary to use
</TD></TR>
</TABLE></P>
<p><b>Returns</b>: Found flags
     </p>
<A NAME="encodeFlags"></A><A NAME="ref17"></A><table width="100%"><tr bgcolor="#eeeeee"><td> void &nbsp;<strong>encodeFlags</strong> (String& buf, int flags, const TokenDict* dict)
<br></td><td align="right"><h3><strong>encodeFlags</strong></h3></td></tr></table><p> <small>[static]</small></p><p>
 Encode (append) flags to a comma separated list
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>buf</i></TD><TD align="left" valign="top">Destination buffer
</TD></TR>
<TR><TD align="left" valign="top"><i>flags</i></TD><TD align="left" valign="top">Flags to encode
</TD></TR>
<TR><TD align="left" valign="top"><i>dict</i></TD><TD align="left" valign="top">Dictionary to use
     </TD></TR>
</TABLE></P>
<HR>
	<table>
	<tr><td><small>Generated by: paulc on bussard on Thu Jul 24 18:41:02 2014, using kdoc 2.0a54.</small></td></tr>
	</table>
</BODY>
</HTML>
